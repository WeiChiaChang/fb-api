(function(t){function e(e){for(var s,r,o=e[0],c=e[1],m=e[2],l=0,p=[];l<o.length;l++)r=o[l],i[r]&&p.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,m||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(s=!1)}s&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},i={app:0},a=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/fb-api/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var m=0;m<o.length;m++)e(o[m]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0cfb":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"header"},[n("div",{staticClass:"left-info"},[n("div",{staticClass:"thumbnail"},[n("img",{attrs:{src:t.posts.thumbnail,alt:""}})]),n("div",{staticClass:"name-info"},[n("div",{staticClass:"name"},[n("a",[t._v(t._s(t.posts.name))])]),n("div",{staticClass:"time"},[t._v("\n          "+t._s(t.posts.dateTime)+" ·\n          "),n("i",{staticClass:"global-icon"})])])]),n("div",{staticClass:"right-info"})]),n("div",{staticClass:"content"},[t._v(t._s(t.posts.comment))]),n("a",{staticClass:"video-link",attrs:{href:t.posts.videoUrl,target:"_blank"}},[n("div",{staticClass:"video-wrapper"},[n("div",{staticClass:"video-thumbnail"},[n("img",{attrs:{src:t.posts.videoThumbnail,alt:""}})]),n("div",{staticClass:"video-description"},[n("div",{staticClass:"youtube-title"},[t._v("YOUTUBE.COM")]),n("div",{staticClass:"video-title"},[t._v(t._s(t.posts.videoTitle))]),n("div",{staticClass:"video-desc"},[t._v(t._s(t.posts.videoDescription))])])])]),n("div",{staticClass:"feedback-info"},[n("div",{staticClass:"feedback-emojis"},[n("i",{staticClass:"icons like-icon"}),t._v("\n      劉德華、東尼大木和其他"+t._s(t.posts.emojiNum)+"人\n    ")]),n("div",{staticClass:"threads-and-share"},[n("div",{staticClass:"threads"},[t._v(t._s(t.comments.length)+"則留言")])])]),n("div",{staticClass:"feedback-action"},[n("div",{staticClass:"fb-wrapper",class:t.postThumbup?"isThumbUp":"",on:{click:t.toggleThumb}},[n("i",{staticClass:"fb-icon thumb-up fa fa-thumbs-o-up"}),t._v(" 讚\n    ")]),n("div",{staticClass:"fb-wrapper",on:{click:t.setFocus}},[n("i",{staticClass:"fb-icon response"}),t._v(" 回應\n    ")]),t._m(0)]),n("div",{staticClass:"comments"},[n("div",{staticClass:"my-comment-wrapper",staticStyle:{"margin-top":"12px"}},[t._m(1),n("div",{staticClass:"my-comment"},[n("div",{staticClass:"my-comment-placeholder"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.myMsg,expression:"myMsg"}],ref:"typing",attrs:{type:"text",placeholder:"留言……"},domProps:{value:t.myMsg},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendComment(t.myMsg)},input:function(e){e.target.composing||(t.myMsg=e.target.value)}}})]),n("div",{staticClass:"my-comment-emojis"})])]),t._l(t.comments,function(e,s){return n("div",{key:s},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"people-comment-wrapper"},[n("div",{staticClass:"people-avatar"},[n("img",{attrs:{src:e.thumbnail,alt:""}})]),n("div",{staticClass:"people-comment"},[n("div",{staticClass:"people-comment-container",class:t.isHTML(e.comment)?"comment-contains-html":""},[n("div",{staticClass:"people-name"},[n("a",[t._v(t._s(e.name))]),e.blueCheck?n("i",{staticClass:"blue-check"}):t._e()]),e.comment.includes("皮卡")?n("div",{staticClass:"people-saying",domProps:{innerHTML:t._s(t.highlight(e.comment))},on:{click:t.pikachu}}):e.comment.includes("熊本熊")?n("div",{staticClass:"people-saying",domProps:{innerHTML:t._s(t.highlight(e.comment))},on:{click:t.kumamon}}):t.isHTML(e.comment)?n("div",{staticClass:"people-saying",domProps:{innerHTML:t._s(e.comment)}}):n("div",{staticClass:"people-saying"},[t._v(t._s(e.comment))])]),e.emojiNum>0?n("div",{staticClass:"comment-reactions comment-too-short"},[n("i",{staticClass:"icons like-icon"}),n("span",{staticClass:"number"},[t._v(t._s(e.emojiNum))])]):t._e(),n("div",{class:["台南億載金城武"===e.name?"show-menu-when-hover":"",e.emojiNum<1?"short-ver-menu":""],on:{click:function(n){return t.openModal(e.id)}}})])]),n("div",{staticClass:"like-and-response-wrapper"},[n("div",{staticClass:"like-comment"},[n("a",{class:t.commentThumbup(e.id)?"isCommentThumbUp":"",on:{click:function(n){return t.toggleCommentThumb(e.id)}}},[t._v("讚")]),n("span",{staticClass:"nbsp"},[t._v("·")])]),n("div",{staticClass:"response-comment"}),n("div",{staticClass:"days-comment"},[t._v(t._s(e.dateTime))])])]),e.commentThread?n("div",t._l(e.commentThread,function(e,s){return n("div",{key:s,staticClass:"comment-threads-container"},[n("div",{staticClass:"people-comment-wrapper"},[n("div",{staticClass:"people-avatar"},[n("img",{attrs:{src:e.thumbnail,alt:""}})]),n("div",{staticClass:"people-comment"},[n("div",{staticClass:"people-comment-container"},[n("div",{staticClass:"people-name"},[n("a",[t._v(t._s(e.name))]),e.blueCheck?n("i",{staticClass:"blue-check"}):t._e()]),e.comment.includes("皮卡")?n("div",{staticClass:"people-saying",domProps:{innerHTML:t._s(t.highlight(e.comment))},on:{click:t.pikachu}}):e.comment.includes("熊本熊")?n("div",{staticClass:"people-saying",domProps:{innerHTML:t._s(t.highlight(e.comment))},on:{click:t.kumamon}}):n("div",{staticClass:"people-saying",domProps:{innerHTML:t._s(e.comment)}})]),n("div",{staticClass:"comment-reactions comment-too-short"},[n("i",{staticClass:"icons like-icon"}),n("span",{staticClass:"number"},[t._v(t._s(e.emojiNum))])]),n("div",{class:["台南億載金城武"===e.name?"show-menu-when-hover":"",e.emojiNum<1?"short-ver-menu":""],on:{click:function(n){return t.openModal(e.id)}}})])]),n("div",{staticClass:"like-and-response-wrapper"},[t._m(2,!0),n("div",{staticClass:"response-comment"}),n("div",{staticClass:"days-comment"},[t._v(t._s(e.dateTime))])])])}),0):t._e()])})],2),n("div",[n("transition",{attrs:{name:"modal"}},[t.isOpen?n("div",[n("div",{staticClass:"overlay",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.isOpen=!1}}},[n("div",{staticClass:"modal"},[n("div",{staticClass:"modal-header-wrapper"},[n("div",{staticClass:"modal-header"},[t._v("刪除")]),n("div",{staticClass:"close-btn",on:{click:function(e){t.isOpen=!t.isOpen}}})]),n("p",{staticClass:"modal-content"},[t._v("你確定要刪除這個留言嗎？")]),n("div",{staticClass:"modal-footer"},[n("div",{staticClass:"modal-btn cancel-btn",on:{click:function(e){t.isOpen=!t.isOpen}}},[t._v("取消")]),n("div",{staticClass:"modal-btn delete-btn",on:{click:function(e){return t.deleteComment(t.currentId)}}},[t._v("刪除")])])])])]):t._e()])],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fb-wrapper"},[n("i",{staticClass:"fb-icon share"}),t._v(" 分享\n    ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-avatar"},[s("img",{attrs:{src:n("6c4e"),alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"like-comment"},[n("a",[t._v("讚")]),n("span",{staticClass:"nbsp"},[t._v("·")])])}],r=(n("a481"),n("6762"),n("2fdb"),n("7f7f"),n("96cf"),n("3b8d")),o=(n("7514"),n("5df3"),n("1c4c"),n("bc3a")),c=n.n(o),m=c.a.create({baseURL:"https://my-awesome-project.herokuapp.com/"}),u=m;function l(){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.get("/comments");case 2:return e=t.sent.data,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)})),p.apply(this,arguments)}function d(t){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.post("/comments",e);case 2:return n=t.sent.data,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)})),h.apply(this,arguments)}function f(t,e){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.put("/comments/".concat(n),{thumbnail:e.thumbnail,name:e.name,blueCheck:e.blueCheck,comment:e.comment,emojiNum:e.emojiNum,shareNum:e.shareNum,commentNum:e.commentNum,dateTime:e.dateTime,thumbUp:e.thumbUp});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}},t)})),v.apply(this,arguments)}function b(t){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",u({url:"/comments/".concat(e),method:"delete"}));case 1:case"end":return t.stop()}},t)})),g.apply(this,arguments)}function C(){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.get("/posts");case 2:return e=t.sent.data,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)})),y.apply(this,arguments)}function w(t){return _.apply(this,arguments)}function _(){return _=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.put("/posts",{thumbnail:e.thumbnail,name:e.name,blueCheck:e.blueCheck,comment:e.comment,emojiNum:e.emojiNum,shareNum:e.shareNum,dateTime:e.dateTime,thumbUp:e.thumbUp,videoThumbnail:e.videoThumbnail,videoUrl:e.videoUrl,videoTitle:e.videoTitle,videoDescription:e.videoDescription});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}},t)})),_.apply(this,arguments)}var k={name:"app",data:function(){return{myMsg:"",isOpen:!1,currentId:-9999}},computed:{posts:function(){return this.$store.state.posts.posts},comments:function(){return this.$store.state.comments.comments},addPostsEmoji:function(){return this.$store.state.posts.posts.emojiNum+1},minusPostEmoji:function(){return this.$store.state.posts.posts.emojiNum-1},postThumbup:function(){return this.$store.state.posts.posts.thumbUp}},methods:{isHTML:function(t){var e=(new DOMParser).parseFromString(t,"text/html");return Array.from(e.body.childNodes).some(function(t){return 1===t.nodeType})},addCommentsEmoji:function(t){var e=this.$store.state.comments.comments.find(function(e){return e.id===t});return e.emojiNum+1},minusCommentsEmoji:function(t){var e=this.$store.state.comments.comments.find(function(e){return e.id===t});return e.emojiNum-1},commentThumbup:function(t){var e=this.$store.state.comments.comments.find(function(e){return e.id===t});return e.thumbUp},setFocus:function(){this.$refs.typing.focus()},toggleThumb:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=Object.assign({},{thumbnail:this.posts.thumbnail,name:this.posts.name,blueCheck:this.posts.blueCheck,comment:this.posts.comment,emojiNum:this.postThumbup?this.minusPostEmoji:this.addPostsEmoji,dateTime:this.posts.dateTime,thumbUp:!this.postThumbup,videoThumbnail:this.posts.videoThumbnail,videoUrl:this.posts.videoUrl,videoTitle:this.posts.videoTitle,videoDescription:this.posts.videoDescription}),t.prev=1,t.next=4,w(e);case 4:this.$store.dispatch("posts/getPosts"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),alert("按讚失敗ＱＱ");case 10:case"end":return t.stop()}},t,this,[[1,7]])}));function e(){return t.apply(this,arguments)}return e}(),toggleCommentThumb:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=Object.assign({},{thumbnail:this.comments.find(function(t){return t.id===e}).thumbnail,name:this.comments.find(function(t){return t.id===e}).name,blueCheck:this.comments.find(function(t){return t.id===e}).blueCheck,comment:this.comments.find(function(t){return t.id===e}).comment,emojiNum:this.commentThumbup(e)?this.minusCommentsEmoji(e):this.addCommentsEmoji(e),commentNum:this.comments.find(function(t){return t.id===e}).commentNum,dateTime:this.comments.find(function(t){return t.id===e}).dateTime,thumbUp:!this.comments.find(function(t){return t.id===e}).thumbUp}),t.prev=1,t.next=4,f(n,e);case 4:this.$store.dispatch("comments/getComments"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),alert("按讚失敗ＱＱ");case 10:case"end":return t.stop()}},t,this,[[1,7]])}));function e(e){return t.apply(this,arguments)}return e}(),highlight:function(t){if(t.includes("皮卡")){var e=t.replace(/([皮卡]+)/g,'<span class="easter-egg-styling">$1</span>');return e}if(t.includes("熊本熊")){var n=t.replace(/([熊本熊]+)/g,'<span class="easter-egg-styling">$1</span>');return n}},sendComment:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.trim()){t.next=12;break}return n=Object.assign({},{thumbnail:"https://upload.cc/i1/2019/08/20/YhrW2H.jpg",name:"台南億載金城武",blueCheck:!0,comment:e,thumbUp:!1,emojiNum:0,dateTime:"4天"}),t.prev=2,t.next=5,d(n);case 5:this.$store.dispatch("comments/getComments"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),alert("留言失敗ＱＱ");case 11:this.myMsg="";case 12:case"end":return t.stop()}},t,this,[[2,8]])}));function e(e){return t.apply(this,arguments)}return e}(),deleteComment:function(t){this.$store.dispatch("comments/deleteComment",t),this.isOpen=!this.isOpen},openModal:function(t){this.isOpen=!this.isOpen,this.currentId=t},pikachu:function(){var t=new Image;t.src="https://upload.cc/i1/2019/08/20/m0gIS8.gif",t.style.width="450px",t.style.height="350px",t.style.transition="4s all",t.style.position="fixed",t.style.left="-400px",t.style.bottom="0px",t.style.zIndex=999999,document.body.appendChild(t),window.setTimeout(function(){t.style.left="calc(100% + 500px)"},50),window.setTimeout(function(){t.parentNode.removeChild(t)},4300)},kumamon:function(){var t=new Image;t.src="https://weichiachang.github.io/easter-eggs-mobile/images/kumamon.gif",t.style.width="400px",t.style.height="500px",t.style.transition="10s all",t.style.position="fixed",t.style.left="calc(50% - 200px)",t.style.bottom="-200px",t.style.zIndex=999999,document.body.appendChild(t),window.setTimeout(function(){t.style.bottom="0px"},30),window.setTimeout(function(){t.style.bottom="-600px"},18300)}},mounted:function(){this.$store.dispatch("posts/getPosts"),this.$store.dispatch("comments/getComments")}},T=k,x=(n("cf25"),n("2877")),j=Object(x["a"])(T,i,a,!1,null,null,null),O=j.exports,M=n("2f62"),N={namespaced:!0,state:{posts:[]},mutations:{SET_POSTS:function(t,e){t.posts=e}},actions:{getPosts:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,C();case 3:s=t.sent,n("SET_POSTS",s);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),updatePosts:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.payload,t.next=3,w(n);case 3:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}},E=(n("20d6"),{namespaced:!0,state:{comments:{}},mutations:{SET_COMMENTS:function(t,e){t.comments=e},DELETE_COMMENT:function(t,e){var n=t.comments.findIndex(function(t){return t.id===e});t.comments.splice(n,1)}},actions:{getComments:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,l();case 3:s=t.sent,n("SET_COMMENTS",s);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),deleteComment:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,t.next=3,b(n);case 3:s("DELETE_COMMENT",n);case 4:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()}});s["a"].use(M["a"]);var R=function(){var t=new M["a"].Store({modules:{posts:N,comments:E}});return t};s["a"].config.productionTip=!1,new s["a"]({store:R,render:function(t){return t(O)}}).$mount("#app")},"6c4e":function(t,e,n){t.exports=n.p+"img/goldxfive.3fd687f3.png"},cf25:function(t,e,n){"use strict";var s=n("0cfb"),i=n.n(s);i.a}});
//# sourceMappingURL=app.9851f864.js.map